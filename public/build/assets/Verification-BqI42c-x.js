import{_ as b}from"./AppLayout.vue_vue_type_script_setup_true_lang-Cfv7ZBw5.js";import{d as k,B as N,r as g,c as V,o as C,a as o,b as i,e as n,u as L,m as D,w as d,f as t,i as l,h as y,t as r,F as h,j as S,p as $}from"./app-CzhniAMT.js";import{_ as A}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-1iHGJxcY.js";import{_ as F}from"./Input.vue_vue_type_script_setup_true_lang-DoOMrtD2.js";import{_ as B}from"./Card.vue_vue_type_script_setup_true_lang-aC5pJkwP.js";import{_ as P,a as T,b as W}from"./CardTitle.vue_vue_type_script_setup_true_lang-tScOHRnG.js";import"./useForwardExpose-DEh402Yc.js";import"./RovingFocusGroup-Daz5GHfr.js";const j={class:"flex flex-col gap-4 p-4"},z={class:"flex items-center justify-between gap-2 mb-4"},E={class:"flex gap-2 items-center"},M={class:"overflow-x-auto rounded-xl border border-sidebar-border/70 dark:border-sidebar-border bg-white dark:bg-gray-900"},I={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},R={class:"bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700"},U={key:0},q={key:1},G={colspan:"7",class:"px-6 py-4 text-center text-gray-500"},H={class:"px-6 py-4 whitespace-nowrap font-medium"},J={class:"px-6 py-4 whitespace-nowrap"},K={class:"px-6 py-4 whitespace-nowrap"},O={class:"px-6 py-4 whitespace-nowrap"},Q={class:"flex flex-col text-sm"},X={key:0},Y={key:1,class:"text-gray-400"},Z={key:2,class:"mt-1"},tt={key:3,class:"text-gray-400"},et={class:"px-6 py-4 whitespace-nowrap"},st={key:0,class:"font-medium"},at={key:1,class:"text-gray-400"},rt={class:"px-6 py-4 whitespace-nowrap"},ot={class:"flex flex-col text-sm"},it={key:0,class:"text-red-600 dark:text-red-400 mt-1"},nt={class:"text-green-600 dark:text-green-400 mt-1"},lt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-400"},dt={key:0,class:"mt-4 text-sm text-muted-foreground"},ht=k({__name:"Verification",setup(ct){N();const v=[{title:"Dashboard",href:"/dashboard"},{title:"Cages",href:"/cages"},{title:"Per Cage Verification",href:"/cages/verification"}],c=g([]),f=g(!0),p=g(""),u=V(()=>{if(!p.value.trim())return c.value;const s=p.value.toLowerCase();return c.value.filter(e=>e.id.toString().includes(s)||e.investor.toLowerCase().includes(s)||e.feed_type.toLowerCase().includes(s))}),_=async()=>{try{f.value=!0;const s=await $.get(route("cages.verification.data"));c.value=s.data.verification_data||[]}catch(s){console.error("Error fetching verification data:",s)}finally{f.value=!1}},m=s=>s==null?"N/A":s.toLocaleString(),x=(s,e=1)=>s==null?"N/A":s.toFixed(e),w=s=>{if(!s)return"No sampling";try{return new Date(s).toLocaleDateString()}catch{return s}};return C(()=>{_()}),(s,e)=>(i(),o(h,null,[n(L(D),{title:"Per Cage Verification"}),n(b,{breadcrumbs:v},{default:d(()=>[t("div",j,[n(B,{class:"p-6"},{default:d(()=>[n(P,null,{default:d(()=>[n(T,{class:"text-2xl font-bold"},{default:d(()=>e[1]||(e[1]=[l("Per Cage Verification")])),_:1}),e[2]||(e[2]=t("p",{class:"text-sm text-muted-foreground mt-1"}," View size, weight, and number of fish for each cage based on latest sampling data ",-1))]),_:1}),n(W,null,{default:d(()=>[t("div",z,[t("div",E,[n(F,{modelValue:p.value,"onUpdate:modelValue":e[0]||(e[0]=a=>p.value=a),placeholder:"Search by cage number, investor, or feed type...",class:"w-96"},null,8,["modelValue"]),n(A,{onClick:_,variant:"outline"},{default:d(()=>e[3]||(e[3]=[l(" ðŸ”„ Refresh ")])),_:1})])]),t("div",M,[t("table",I,[e[10]||(e[10]=t("thead",{class:"bg-gray-50 dark:bg-gray-800"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Cage # "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Investor "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Feed Type "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Size "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Weight "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Number of Fish "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Last Sampling ")])],-1)),t("tbody",R,[f.value?(i(),o("tr",U,e[4]||(e[4]=[t("td",{colspan:"7",class:"px-6 py-4 text-center text-gray-500"}," Loading verification data... ",-1)]))):u.value.length===0?(i(),o("tr",q,[t("td",G,r(p.value?"No cages found matching your search.":"No cages found."),1)])):(i(!0),o(h,{key:2},S(u.value,a=>(i(),o("tr",{key:a.id,class:"hover:bg-gray-50 dark:hover:bg-gray-800"},[t("td",H," #"+r(a.id),1),t("td",J,r(a.investor),1),t("td",K,r(a.feed_type),1),t("td",O,[t("div",Q,[a.avg_length?(i(),o("span",X,[e[5]||(e[5]=t("span",{class:"font-medium"},"Length:",-1)),l(" "+r(x(a.avg_length))+" cm ",1)])):(i(),o("span",Y,"Length: N/A")),a.avg_width?(i(),o("span",Z,[e[6]||(e[6]=t("span",{class:"font-medium"},"Width:",-1)),l(" "+r(x(a.avg_width))+" cm ",1)])):(i(),o("span",tt,"Width: N/A"))])]),t("td",et,[a.avg_weight?(i(),o("div",st,r(x(a.avg_weight))+" g ",1)):(i(),o("span",at,"N/A"))]),t("td",rt,[t("div",ot,[t("span",null,[e[7]||(e[7]=t("span",{class:"font-medium"},"Total:",-1)),l(" "+r(m(a.number_of_fingerlings)),1)]),a.mortality>0?(i(),o("span",it,[e[8]||(e[8]=t("span",{class:"font-medium"},"Mortality:",-1)),l(" "+r(m(a.mortality)),1)])):y("",!0),t("span",nt,[e[9]||(e[9]=t("span",{class:"font-medium"},"Present:",-1)),l(" "+r(m(a.present_stocks)),1)])])]),t("td",lt,r(w(a.last_sampling_date)),1)]))),128))])])]),!f.value&&u.value.length>0?(i(),o("div",dt," Showing "+r(u.value.length)+" of "+r(c.value.length)+" cage"+r(c.value.length!==1?"s":""),1)):y("",!0)]),_:1})]),_:1})])]),_:1})],64))}});export{ht as default};

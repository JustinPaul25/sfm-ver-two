import{d as R,r as A,c as w,x as $,a as n,b as g,e as a,u as j,m as I,w as d,f as e,i as u,l as U,F as x,j as _,t as o,v as B,h as W,A as L,W as P}from"./app-Py-KhCof.js";import{_ as z}from"./AppLayout.vue_vue_type_script_setup_true_lang-BxOgdMMd.js";import{_ as v}from"./Card.vue_vue_type_script_setup_true_lang-GpF-q2cn.js";import{_ as c}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-Dn4fNI4e.js";import{_ as h}from"./Input.vue_vue_type_script_setup_true_lang--G0Q0eTO.js";import{_ as y}from"./Label.vue_vue_type_script_setup_true_lang-CYHA3nUU.js";import{_ as K}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./useForwardExpose-N3V696vC.js";import"./RovingFocusGroup-Cd9WNB1g.js";const q={class:"flex flex-col gap-6 p-4 max-w-7xl mx-auto"},G={class:"flex flex-col md:flex-row md:items-center md:justify-between gap-4"},H={class:"flex gap-2"},J={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},Q=["value"],X={class:"flex gap-2 mt-4"},Y={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},Z={class:"text-sm text-muted-foreground"},tt={key:0,class:"text-xs text-muted-foreground"},et={class:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-4"},rt={class:"text-sm text-muted-foreground"},at={class:"overflow-x-auto rounded-lg border border-gray-200 dark:border-gray-700"},ot={class:"min-w-full"},st={class:"bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700"},lt={class:"px-4 py-3 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100"},dt={class:"px-4 py-3 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100"},it={class:"px-4 py-3 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100"},nt={class:"px-4 py-3 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100"},gt={class:"px-4 py-3 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100"},ut={class:"px-4 py-3 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100"},pt={class:"px-4 py-3 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100"},mt={class:"px-4 py-3 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100"},xt={class:"px-4 py-3 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100"},ct={key:0,class:"text-center py-8 text-muted-foreground"},yt=R({__name:"Overall",props:{samplings:{},summary:{},investors:{},filters:{}},setup(C){const s=C,S=[{title:"Dashboard",href:"/dashboard"},{title:"Reports",href:"/reports"},{title:"Overall Reports",href:"/reports/overall"}],l=A({investor_id:s.filters.investor_id||"",date_from:s.filters.date_from||"",date_to:s.filters.date_to||"",cage_no:s.filters.cage_no||""}),f=()=>{const i={};Object.entries(l.value).forEach(([t,r])=>{r&&(i[t]=r)}),P.get("/reports/overall",i,{preserveState:!0,preserveScroll:!0})},V=()=>{l.value={investor_id:"",date_from:"",date_to:"",cage_no:""},f()},T=()=>{const i=new URLSearchParams;Object.entries(l.value).forEach(([t,r])=>{r&&i.append(t,r)}),window.open(`/reports/export-excel?${i.toString()}`,"_blank")},M=()=>{window.print()},b=w(()=>s.samplings.map(i=>{const t=i.samples||[],r=t.length,p=t.reduce((m,E)=>m+(E.weight||0),0),F=r>0?p/r:0,N=r>0?Math.min(...t.map(m=>m.weight||0)):0,O=r>0?Math.max(...t.map(m=>m.weight||0)):0;return{...i,sampleCount:r,totalWeight:p,avgWeight:Math.round(F*100)/100,minWeight:N,maxWeight:O,totalWeightKg:Math.round(p/1e3*100)/100}})),D=w(()=>[{label:"Total Samplings",value:s.summary.total_samplings,unit:"",color:"text-blue-600"},{label:"Total Samples",value:s.summary.total_samples,unit:"pcs",color:"text-green-600"},{label:"Average Weight",value:Math.round(s.summary.avg_weight*100)/100,unit:"g",color:"text-purple-600"},{label:"Total Weight",value:Math.round(s.summary.total_weight_kg*100)/100,unit:"kg",color:"text-orange-600"},{label:"Min Weight",value:s.summary.min_weight,unit:"g",color:"text-red-600"},{label:"Max Weight",value:s.summary.max_weight,unit:"g",color:"text-indigo-600"},{label:"Total Investors",value:s.summary.total_investors,unit:"",color:"text-teal-600"},{label:"Total Cages",value:s.summary.total_cages,unit:"",color:"text-pink-600"}]);let k;return $(l,()=>{clearTimeout(k),k=setTimeout(()=>{f()},500)},{deep:!0}),(i,t)=>(g(),n(x,null,[a(j(I),{title:"Overall Reports"}),a(z,{breadcrumbs:S},{default:d(()=>[e("div",q,[e("div",G,[t[6]||(t[6]=e("div",null,[e("h1",{class:"text-3xl font-bold"},"Overall Sampling Reports"),e("p",{class:"text-muted-foreground"},"Comprehensive analysis of all sampling data")],-1)),e("div",H,[a(c,{variant:"outline",onClick:M},{default:d(()=>t[4]||(t[4]=[u(" ðŸ–¨ï¸ Print Report ")])),_:1}),a(c,{onClick:T},{default:d(()=>t[5]||(t[5]=[u(" ðŸ“Š Export to Excel ")])),_:1})])]),a(v,{class:"p-6 print:hidden"},{default:d(()=>[t[14]||(t[14]=e("h3",{class:"text-lg font-semibold mb-4"},"Filters",-1)),e("div",J,[e("div",null,[a(y,{for:"investor"},{default:d(()=>t[7]||(t[7]=[u("Investor")])),_:1}),U(e("select",{id:"investor","onUpdate:modelValue":t[0]||(t[0]=r=>l.value.investor_id=r),class:"w-full px-3 py-2 border border-input bg-background text-foreground rounded-md focus:outline-none focus:ring-2 focus:ring-ring focus:border-ring transition-colors"},[t[8]||(t[8]=e("option",{value:""},"All Investors",-1)),(g(!0),n(x,null,_(i.investors,r=>(g(),n("option",{key:r.id,value:r.id},o(r.name),9,Q))),128))],512),[[B,l.value.investor_id]])]),e("div",null,[a(y,{for:"date_from"},{default:d(()=>t[9]||(t[9]=[u("Date From")])),_:1}),a(h,{id:"date_from",modelValue:l.value.date_from,"onUpdate:modelValue":t[1]||(t[1]=r=>l.value.date_from=r),type:"date",placeholder:"Start date"},null,8,["modelValue"])]),e("div",null,[a(y,{for:"date_to"},{default:d(()=>t[10]||(t[10]=[u("Date To")])),_:1}),a(h,{id:"date_to",modelValue:l.value.date_to,"onUpdate:modelValue":t[2]||(t[2]=r=>l.value.date_to=r),type:"date",placeholder:"End date"},null,8,["modelValue"])]),e("div",null,[a(y,{for:"cage_no"},{default:d(()=>t[11]||(t[11]=[u("Cage Number")])),_:1}),a(h,{id:"cage_no",modelValue:l.value.cage_no,"onUpdate:modelValue":t[3]||(t[3]=r=>l.value.cage_no=r),placeholder:"Cage number"},null,8,["modelValue"])])]),e("div",X,[a(c,{onClick:f},{default:d(()=>t[12]||(t[12]=[u("Apply Filters")])),_:1}),a(c,{variant:"outline",onClick:V},{default:d(()=>t[13]||(t[13]=[u("Clear Filters")])),_:1})])]),_:1}),a(v,{class:"p-6"},{default:d(()=>[t[15]||(t[15]=e("h3",{class:"text-lg font-semibold mb-4"},"Summary Statistics",-1)),e("div",Y,[(g(!0),n(x,null,_(D.value,r=>(g(),n("div",{key:r.label,class:"text-center p-4 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700"},[e("div",{class:L(["text-2xl font-bold",r.color])},o(r.value),3),e("div",Z,o(r.label),1),r.unit?(g(),n("div",tt,o(r.unit),1)):W("",!0)]))),128))])]),_:1}),a(v,{class:"p-6"},{default:d(()=>[e("div",et,[t[16]||(t[16]=e("h3",{class:"text-lg font-semibold"},"Detailed Sampling Data",-1)),e("div",rt," Showing "+o(b.value.length)+" records ",1)]),e("div",at,[e("table",ot,[t[17]||(t[17]=e("thead",{class:"bg-gray-50 dark:bg-gray-800"},[e("tr",null,[e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider border-b border-gray-200 dark:border-gray-700"}," Date "),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider border-b border-gray-200 dark:border-gray-700"}," Investor "),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider border-b border-gray-200 dark:border-gray-700"}," Cage No "),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider border-b border-gray-200 dark:border-gray-700"}," DOC "),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider border-b border-gray-200 dark:border-gray-700"}," Sample Count "),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider border-b border-gray-200 dark:border-gray-700"}," Total Weight (g) "),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider border-b border-gray-200 dark:border-gray-700"}," Avg Weight (g) "),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider border-b border-gray-200 dark:border-gray-700"}," Min Weight (g) "),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider border-b border-gray-200 dark:border-gray-700"}," Max Weight (g) ")])],-1)),e("tbody",st,[(g(!0),n(x,null,_(b.value,r=>{var p;return g(),n("tr",{key:r.id,class:"hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors"},[e("td",lt,o(r.date_sampling),1),e("td",dt,o(((p=r.investor)==null?void 0:p.name)||"N/A"),1),e("td",it,o(r.cage_no),1),e("td",nt,o(r.doc),1),e("td",gt,o(r.sampleCount),1),e("td",ut,o(r.totalWeight),1),e("td",pt,o(r.avgWeight),1),e("td",mt,o(r.minWeight),1),e("td",xt,o(r.maxWeight),1)])}),128))])])]),b.value.length===0?(g(),n("div",ct," No sampling data found with the current filters. ")):W("",!0)]),_:1})])]),_:1})],64))}}),St=K(yt,[["__scopeId","data-v-ec9551da"]]);export{St as default};

import{_ as P}from"./AppLayout.vue_vue_type_script_setup_true_lang-mgq7Ep2G.js";import{d as I,r as j,c as h,a as p,b as u,e as x,u as V,m as M,w as v,f as t,i,t as e,h as y,F as f,j as N}from"./app-CqB65DDL.js";import{_ as O}from"./Card.vue_vue_type_script_setup_true_lang-C00h4H4E.js";import{_ as E}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-Cw3-Gv6p.js";import{_ as z}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./useForwardExpose-DqNWPYgR.js";import"./RovingFocusGroup-BP1Ek16V.js";const H={class:"flex flex-col gap-6 p-4 max-w-6xl mx-auto"},U={class:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-4"},q={class:"text-sm text-muted-foreground"},J={class:"font-medium"},K={class:"text-sm text-muted-foreground"},Q={class:"font-medium"},X={class:"text-sm text-muted-foreground"},Y={class:"font-medium"},Z={class:"text-sm text-muted-foreground"},tt={class:"font-medium"},st={class:"overflow-x-auto rounded-xl border border-sidebar-border/70 bg-white dark:bg-gray-900 mb-6"},et={class:"flex gap-2"},ot={class:"mb-6 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800"},lt={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},at={class:"text-lg font-bold text-blue-900 dark:text-blue-100"},it={key:0},nt={class:"text-lg font-bold text-blue-900 dark:text-blue-100"},dt={key:1},rt={class:"text-lg font-bold text-blue-900 dark:text-blue-100"},pt={class:"text-lg font-bold text-blue-900 dark:text-blue-100"},ut={class:"overflow-x-auto rounded-xl border border-sidebar-border/70 bg-white dark:bg-gray-900 mb-6"},gt={class:"min-w-full text-xs md:text-sm"},mt={class:"px-4 py-2"},ct={class:"px-4 py-2"},xt={class:"px-4 py-2"},ht={class:"px-4 py-2"},vt={class:"px-4 py-2"},bt={class:"px-4 py-2"},yt={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ft={class:"text-sm space-y-1"},_t={class:"font-medium"},kt={class:"font-medium"},Wt={class:"font-medium"},Ft={class:"font-medium"},wt={class:"font-medium"},St={class:"font-medium"},Bt={class:"font-medium"},Rt={class:"font-medium"},Nt={class:"font-medium"},Et={class:"font-medium"},At={class:"font-medium"},Ct={class:"font-medium"},Tt={class:"font-medium"},Dt={class:"font-medium"},Gt={class:"font-medium"},Lt={class:"flex flex-col items-center justify-center"},$t={class:"w-full space-y-4"},Pt={class:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg"},It={class:"text-2xl font-bold text-blue-600 dark:text-blue-400"},jt={class:"text-sm text-blue-700 dark:text-blue-300"},Vt={key:0,class:"bg-green-50 dark:bg-green-900/20 p-4 rounded-lg"},Mt={class:"text-lg font-bold text-green-600 dark:text-green-400"},Ot={class:"text-sm text-green-700 dark:text-green-300"},zt={class:"bg-purple-50 dark:bg-purple-900/20 p-4 rounded-lg"},Ht={class:"text-lg font-bold text-purple-600 dark:text-purple-400"},Ut={class:"mt-8"},qt={class:"overflow-x-auto rounded-xl border border-sidebar-border/70 bg-white dark:bg-gray-900"},Jt={class:"min-w-full text-xs md:text-sm"},Kt={class:"px-2 py-1"},Qt={class:"px-2 py-1"},Xt={class:"px-2 py-1"},Yt={class:"px-2 py-1"},Zt={class:"px-2 py-1"},ts={class:"px-2 py-1"},ss={class:"px-2 py-1"},es={class:"px-2 py-1"},os={class:"px-2 py-1"},ls={class:"px-2 py-1"},as={class:"px-2 py-1"},is={class:"px-2 py-1"},ns={class:"px-2 py-1"},ds=I({__name:"SamplingReport",props:{sampling:{},cageEntry:{},samples:{},totals:{},history:{}},setup(A){var _,k,W,F;const n=A,a=j({date:((_=n.sampling)==null?void 0:_.date)||"",investor:((k=n.sampling)==null?void 0:k.investor)||"",cageNo:((W=n.sampling)==null?void 0:W.cageNo)||"",doc:((F=n.sampling)==null?void 0:F.doc)||"",samples:n.samples||[],totals:n.totals||{totalWeight:0,totalSamples:0,avgWeight:0,totalStocks:0,mortality:0,presentStocks:0,biomass:0,feedingRate:0,dailyFeedRation:0,feedConsumption:0,prevABW:0,prevBiomass:0,totalWtGained:0,dailyWtGained:0,fcr:0},history:n.history||[]}),d=l=>{if(l==null||l==="")return 0;const s=typeof l=="string"?parseFloat(l):l;return isNaN(s)?0:Math.round(s*10)/10},C=l=>{if(!l)return"-";try{const s=new Date(l);if(isNaN(s.getTime()))return"-";const o={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0};return s.toLocaleString("en-US",o)}catch{return"-"}},T=h(()=>[...a.value.samples||[]].sort((o,m)=>(o.sample_no||0)-(m.sample_no||0)).map(o=>({no:o.sample_no||"",weight:d(o.weight),length:o.length?d(o.length):null,width:o.width?d(o.width):null,type:g.value.type,testedAt:C(o.created_at)}))),D=h(()=>{const l=a.value.totals,s=l.avgWeight||0,o=l.prevBiomass>0?(l.biomass-l.prevBiomass)/l.prevBiomass*100:0;return{biomassPerFish:d(s).toFixed(1),biomassGrowthRate:o.toFixed(1),biomassEfficiency:l.avgWeight>0?(l.biomass/l.avgWeight*1e3).toFixed(2):"0.00"}});h(()=>{if(!n.cageEntry)return"";const l=[`No. ${n.cageEntry.cageNo}`,`weight ${n.cageEntry.weight} kg`];return n.cageEntry.length&&l.push(`length ${n.cageEntry.length} cm`),n.cageEntry.width&&l.push(`width ${n.cageEntry.width} cm`),l.push(`type: ${n.cageEntry.type||"N/A"}`),`(${l.join(", ")})`});const g=h(()=>{var B,R;const l=a.value.samples||[];if(l.length===0)return{avgWeight:0,avgLength:null,avgWidth:null,type:((B=n.cageEntry)==null?void 0:B.type)||"N/A"};const s=l.reduce((r,c)=>r+(c.weight||0),0),o=l.length>0?s/l.length:0,m=l.filter(r=>r.length!=null),w=m.length>0?m.reduce((r,c)=>r+(c.length||0),0)/m.length:null,b=l.filter(r=>r.width!=null),S=b.length>0?b.reduce((r,c)=>r+(c.width||0),0)/b.length:null;return{avgWeight:d(o),avgLength:w?d(w):null,avgWidth:S?d(S):null,type:((R=n.cageEntry)==null?void 0:R.type)||"N/A"}}),G=[{title:"Dashboard",href:"/dashboard"},{title:"Samplings",href:"/samplings"},{title:"Sampling Report",href:"/samplings/report"}],L=()=>{window.print()},$=()=>{var s;const l=(s=n.sampling)==null?void 0:s.id;l?window.open(route("samplings.export-report",l),"_blank"):window.open(route("samplings.export-report"),"_blank")};return(l,s)=>(u(),p(f,null,[x(V(M),{title:"Sampling Report"}),x(P,{breadcrumbs:G},{default:v(()=>[t("div",H,[x(O,{class:"p-6"},{default:v(()=>[t("div",U,[t("div",null,[s[4]||(s[4]=t("h2",{class:"text-2xl font-bold mb-1"},"Sampling Report",-1)),t("div",q,[s[0]||(s[0]=i("Date: ")),t("span",J,e(a.value.date),1)]),t("div",K,[s[1]||(s[1]=i("Investor: ")),t("span",Q,e(a.value.investor),1)]),t("div",X,[s[2]||(s[2]=i("Cage No: ")),t("span",Y,e(a.value.cageNo),1)]),t("div",Z,[s[3]||(s[3]=i("DOC: ")),t("span",tt,e(a.value.doc),1)])])]),t("div",st,[t("div",et,[x(E,{variant:"outline",onClick:L},{default:v(()=>s[5]||(s[5]=[i("ðŸ–¨ï¸ Print Report")])),_:1}),x(E,{variant:"secondary",onClick:$},{default:v(()=>s[6]||(s[6]=[i("ðŸ“Š Export to Excel")])),_:1})])]),t("div",ot,[s[11]||(s[11]=t("h3",{class:"font-semibold mb-3 text-blue-900 dark:text-blue-100"},"Average Data",-1)),t("div",lt,[t("div",null,[s[7]||(s[7]=t("div",{class:"text-sm text-blue-700 dark:text-blue-300"},"Weight",-1)),t("div",at,e(g.value.avgWeight.toFixed(1))+" g",1)]),g.value.avgLength?(u(),p("div",it,[s[8]||(s[8]=t("div",{class:"text-sm text-blue-700 dark:text-blue-300"},"Length",-1)),t("div",nt,e(g.value.avgLength.toFixed(1))+" cm",1)])):y("",!0),g.value.avgWidth?(u(),p("div",dt,[s[9]||(s[9]=t("div",{class:"text-sm text-blue-700 dark:text-blue-300"},"Width",-1)),t("div",rt,e(g.value.avgWidth.toFixed(1))+" cm",1)])):y("",!0),t("div",null,[s[10]||(s[10]=t("div",{class:"text-sm text-blue-700 dark:text-blue-300"},"Type",-1)),t("div",pt,e(g.value.type),1)])])]),t("div",ut,[t("table",gt,[s[12]||(s[12]=t("thead",{class:"bg-gray-50 dark:bg-gray-800"},[t("tr",null,[t("th",{class:"px-4 py-2 text-left"},"No."),t("th",{class:"px-4 py-2 text-left"},"Weight (g)"),t("th",{class:"px-4 py-2 text-left"},"Length (cm)"),t("th",{class:"px-4 py-2 text-left"},"Width (cm)"),t("th",{class:"px-4 py-2 text-left"},"Type"),t("th",{class:"px-4 py-2 text-left"},"Tested At")])],-1)),t("tbody",null,[(u(!0),p(f,null,N(T.value,o=>(u(),p("tr",{key:o.no,class:"border-b border-gray-200 dark:border-gray-700"},[t("td",mt,e(o.no),1),t("td",ct,e(o.weight?o.weight.toFixed(1):""),1),t("td",xt,e(o.length?o.length.toFixed(1):"-"),1),t("td",ht,e(o.width?o.width.toFixed(1):"-"),1),t("td",vt,e(o.type),1),t("td",bt,e(o.testedAt),1)]))),128))])])]),t("div",yt,[t("div",null,[s[28]||(s[28]=t("h3",{class:"font-semibold mb-2"},"Summary",-1)),t("ul",ft,[t("li",null,[s[13]||(s[13]=i("Total w.t. of samples: ")),t("span",_t,e(d(a.value.totals.totalWeight).toFixed(1))+" grams",1)]),t("li",null,[s[14]||(s[14]=i("Total # of samples: ")),t("span",kt,e(a.value.totals.totalSamples)+" pcs",1)]),t("li",null,[s[15]||(s[15]=i("Avg. Body Weight: ")),t("span",Wt,e(d(a.value.totals.avgWeight).toFixed(1))+" grams",1)]),t("li",null,[s[16]||(s[16]=i("Total Stocks: ")),t("span",Ft,e(a.value.totals.totalStocks)+" pcs",1)]),t("li",null,[s[17]||(s[17]=i("Mortality to date: ")),t("span",wt,e(a.value.totals.mortality)+" pcs",1)]),t("li",null,[s[18]||(s[18]=i("Present Stocks: ")),t("span",St,e(a.value.totals.presentStocks)+" pcs",1)]),t("li",null,[s[19]||(s[19]=i("Biomass: ")),t("span",Bt,e(a.value.totals.biomass)+" kgs",1)]),t("li",null,[s[20]||(s[20]=i("Feeding Rate: ")),t("span",Rt,e(a.value.totals.feedingRate)+"%",1)]),t("li",null,[s[21]||(s[21]=i("Daily Feed Ration: ")),t("span",Nt,e(a.value.totals.dailyFeedRation)+" kgs",1)]),t("li",null,[s[22]||(s[22]=i("Feed Consumption: ")),t("span",Et,e(a.value.totals.feedConsumption)+" kgs",1)]),t("li",null,[s[23]||(s[23]=i("Previous ABW: ")),t("span",At,e(a.value.totals.prevABW)+" grams",1)]),t("li",null,[s[24]||(s[24]=i("Previous biomass: ")),t("span",Ct,e(a.value.totals.prevBiomass)+" kgs",1)]),t("li",null,[s[25]||(s[25]=i("Total Wt. gained: ")),t("span",Tt,e(a.value.totals.totalWtGained)+" kgs",1)]),t("li",null,[s[26]||(s[26]=i("Daily weight gained: ")),t("span",Dt,e(a.value.totals.dailyWtGained)+" grams/day",1)]),t("li",null,[s[27]||(s[27]=i("Feed Conversion Ratio: ")),t("span",Gt,e(a.value.totals.fcr),1)])])]),t("div",Lt,[s[33]||(s[33]=t("h3",{class:"font-semibold mb-2"},"Biomass Analysis",-1)),t("div",$t,[t("div",Pt,[s[29]||(s[29]=t("h4",{class:"font-medium text-blue-900 dark:text-blue-100 mb-2"},"Current Biomass",-1)),t("div",It,e(a.value.totals.biomass)+" kg",1),t("div",jt,e(a.value.totals.presentStocks)+" fish Ã— "+e(d(a.value.totals.avgWeight).toFixed(1))+"g avg weight ",1)]),a.value.totals.prevBiomass>0?(u(),p("div",Vt,[s[30]||(s[30]=t("h4",{class:"font-medium text-green-900 dark:text-green-100 mb-2"},"Biomass Growth",-1)),t("div",Mt," +"+e(a.value.totals.totalWtGained)+" kg ",1),t("div",Ot,e(a.value.totals.dailyWtGained)+" kg/day average ",1)])):y("",!0),t("div",zt,[s[31]||(s[31]=t("h4",{class:"font-medium text-purple-900 dark:text-purple-100 mb-2"},"Biomass per Fish",-1)),t("div",Ht,e(D.value.biomassPerFish)+"g ",1),s[32]||(s[32]=t("div",{class:"text-sm text-purple-700 dark:text-purple-300"}," Average weight per fish ",-1))])])])]),t("div",Ut,[s[35]||(s[35]=t("h3",{class:"font-semibold mb-2"},"Historical Data",-1)),t("div",qt,[t("table",Jt,[s[34]||(s[34]=t("thead",{class:"bg-gray-50 dark:bg-gray-800"},[t("tr",null,[t("th",{class:"px-2 py-2"},"Date"),t("th",{class:"px-2 py-2"},"DOC (days)"),t("th",{class:"px-2 py-2"},"Total Stocks"),t("th",{class:"px-2 py-2"},"Mortality to date (pcs)"),t("th",{class:"px-2 py-2"},"Present Stocks (pcs)"),t("th",{class:"px-2 py-2"},"ABW (grams)"),t("th",{class:"px-2 py-2"},"Wt. Increment per day (grams)"),t("th",{class:"px-2 py-2"},"Biomass (kgs)"),t("th",{class:"px-2 py-2"},"Feeding Rate"),t("th",{class:"px-2 py-2"},"Daily Feed Ration (kgs)"),t("th",{class:"px-2 py-2"},"Feed Consumed (kgs)"),t("th",{class:"px-2 py-2"},"Total Wt. gained (kgs)"),t("th",{class:"px-2 py-2"},"FCR")])],-1)),t("tbody",null,[(u(!0),p(f,null,N(a.value.history,o=>(u(),p("tr",{key:o.date},[t("td",Kt,e(o.date),1),t("td",Qt,e(o.doc),1),t("td",Xt,e(o.stocks),1),t("td",Yt,e(o.mortality),1),t("td",Zt,e(o.present),1),t("td",ts,e(o.abw),1),t("td",ss,e(o.wtInc),1),t("td",es,e(o.biomass),1),t("td",os,e(o.fr),1),t("td",ls,e(o.dfr),1),t("td",as,e(o.feed),1),t("td",is,e(o.totalGained),1),t("td",ns,e(o.fcr),1)]))),128))])])])])]),_:1})])]),_:1})],64))}}),hs=z(ds,[["__scopeId","data-v-560e7413"]]);export{hs as default};

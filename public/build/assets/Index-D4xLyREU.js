import{_ as Z}from"./AppLayout.vue_vue_type_script_setup_true_lang-Cfv7ZBw5.js";import{d as ee,r as y,c as k,x as te,a as n,b as r,e as d,u as se,m as le,w as u,f as e,g as E,h as C,t as l,F as f,j as w,i as G,A as N,W as oe}from"./app-CzhniAMT.js";import{_ as x}from"./Card.vue_vue_type_script_setup_true_lang-aC5pJkwP.js";import{_ as R}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-1iHGJxcY.js";import{_ as j}from"./Input.vue_vue_type_script_setup_true_lang-DoOMrtD2.js";import{_ as ae}from"./SamplingTrendsChart.vue_vue_type_script_setup_true_lang-CmknCcPa.js";import"./useForwardExpose-DEh402Yc.js";import"./RovingFocusGroup-Daz5GHfr.js";const re={class:"flex h-full flex-1 flex-col gap-6 p-4"},ne={class:"flex flex-col gap-4"},ie={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},de={class:"text-2xl font-bold"},ue={class:"text-muted-foreground"},ge={class:"flex flex-col sm:flex-row gap-2"},ce={class:"flex gap-1"},me={key:0,class:"flex gap-2"},_e={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},ve={class:"flex items-center justify-between"},pe={class:"text-sm font-medium text-muted-foreground"},fe={class:"text-2xl font-bold"},xe={key:1,class:"text-xs text-muted-foreground"},he={class:"text-3xl"},be={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},we={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-4 gap-4"},ye={class:"cage-dropdown-container"},ke={class:"relative"},Ce={key:0,class:"absolute z-10 w-full sm:w-64 mt-1 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-md shadow-lg max-h-60 overflow-auto"},$e=["onClick"],Se={class:"space-y-4"},De={class:"grid grid-cols-2 gap-4"},Ve={class:"text-center p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg"},We={class:"text-2xl font-bold text-blue-600"},Me={class:"text-center p-3 bg-green-50 dark:bg-green-900/20 rounded-lg"},Te={class:"text-2xl font-bold text-green-600"},Ae={class:"grid grid-cols-2 gap-4"},Ne={class:"text-center p-3 bg-orange-50 dark:bg-orange-900/20 rounded-lg"},Fe={class:"text-2xl font-bold text-orange-600"},je={class:"text-center p-3 bg-purple-50 dark:bg-purple-900/20 rounded-lg"},Ie={class:"text-2xl font-bold text-purple-600"},Ue={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},ze={class:"space-y-3"},Be={class:"font-medium"},Le={class:"text-sm text-muted-foreground"},Pe={class:"text-right"},Ee={class:"font-medium"},Ge={class:"text-sm text-muted-foreground"},Re={key:0,class:"text-center py-8 text-muted-foreground"},Oe={class:"space-y-3"},qe={class:"font-medium"},He={class:"text-sm text-muted-foreground"},Je={class:"text-right"},Ke={class:"font-medium"},Qe={key:0,class:"text-center py-8 text-muted-foreground"},Xe={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},Ye={class:"flex items-center gap-3"},Ze={class:"w-10 h-10 bg-green-500 text-white rounded-full flex items-center justify-center text-lg font-bold"},et={class:"font-medium"},tt={class:"text-sm text-muted-foreground"},st={class:"text-xs text-muted-foreground"},lt={class:"overflow-x-auto"},ot={class:"w-full"},at={class:"py-2 px-3"},rt={class:"py-2 px-3"},nt={class:"py-2 px-3"},it={class:"py-2 px-3"},dt={class:"py-2 px-3"},ut={class:"py-2 px-3"},gt={key:0,class:"text-center py-8 text-muted-foreground"},ct={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},mt={class:"text-center p-6 bg-gradient-to-r from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 rounded-lg"},_t={class:"text-xs text-muted-foreground mt-1"},vt={class:"text-center p-6 bg-gradient-to-r from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 rounded-lg"},pt={class:"text-xs text-muted-foreground mt-1"},$t=ee({__name:"Index",props:{analytics:{},investor:{},cages:{},farmers:{}},setup(O){const F=O,q=[{title:"Investor Dashboard",href:"/investor/dashboard"}],$=y("30days"),S=y(""),D=y(""),g=y(null),h=y(""),V=y(!1),H=[{value:"day",label:"Today"},{value:"week",label:"This Week"},{value:"30days",label:"Last 30 Days"},{value:"month",label:"This Month"},{value:"custom",label:"Custom Range"}],o=k(()=>F.analytics||{}),J=k(()=>F.investor||{}),I=k(()=>F.cages||[]),U=k(()=>F.farmers||[]),K=k(()=>{var i,t,c,m,_,s,a,v,p,M,T,A;return[{title:"My Cages",value:((i=o.value.summary)==null?void 0:i.total_cages)||0,icon:"ðŸ ",color:"bg-blue-500",description:"Total cages"},{title:"My Farmers",value:((t=o.value.summary)==null?void 0:t.total_farmers)||0,icon:"ðŸ‘¨â€ðŸŒ¾",color:"bg-green-500",description:"Active farmers"},{title:"Samplings This Period",value:((c=o.value.summary)==null?void 0:c.samplings_in_period)||0,icon:"ðŸ“Š",color:"bg-purple-500",change:((m=o.value.growth_metrics)==null?void 0:m.sampling_growth)>0?`+${(_=o.value.growth_metrics)==null?void 0:_.sampling_growth}%`:`${(s=o.value.growth_metrics)==null?void 0:s.sampling_growth}%`,changeType:((a=o.value.growth_metrics)==null?void 0:a.sampling_growth)>0?"positive":"negative"},{title:"Avg Sample Weight",value:`${((v=o.value.weight_stats)==null?void 0:v.avg_weight)||0}g`,icon:"âš–ï¸",color:"bg-orange-500",change:((p=o.value.growth_metrics)==null?void 0:p.weight_growth)>0?`+${(M=o.value.growth_metrics)==null?void 0:M.weight_growth}%`:`${(T=o.value.growth_metrics)==null?void 0:T.weight_growth}%`,changeType:((A=o.value.growth_metrics)==null?void 0:A.weight_growth)>0?"positive":"negative"}]});function Q(i){$.value=i,i!=="custom"&&W()}function W(){const i={period:$.value};$.value==="custom"&&S.value&&D.value&&(i.start_date=S.value,i.end_date=D.value),g.value&&(i.cage_no=g.value),oe.get("/investor/dashboard",i,{preserveState:!0,preserveScroll:!0})}function X(){S.value&&D.value&&W()}function Y(i){return new Intl.NumberFormat().format(i)}function b(i){return`${i.toFixed(1)}g`}const z=k(()=>{if(!h.value)return I.value;const i=h.value.toLowerCase();return I.value.filter(t=>{var c,m,_;return((c=t.id)==null?void 0:c.toString().includes(i))||((m=t.number_of_fingerlings)==null?void 0:m.toString().includes(i))||((_=t.farmer_name)==null?void 0:_.toLowerCase().includes(i))})});return te(g,()=>{W()}),(i,t)=>(r(),n(f,null,[d(se(le),{title:"Investor Dashboard"}),d(Z,{breadcrumbs:q},{default:u(()=>{var c,m,_;return[e("div",re,[e("div",ne,[e("div",ie,[e("div",null,[e("h1",de,"Welcome, "+l(J.value.name),1),e("p",ue,l(((c=o.value.date_range)==null?void 0:c.period)||"This Month")+" ("+l((m=o.value.date_range)==null?void 0:m.start)+" to "+l((_=o.value.date_range)==null?void 0:_.end)+") ",1)]),e("div",ge,[e("div",ce,[(r(),n(f,null,w(H,s=>d(R,{key:s.value,variant:$.value===s.value?"default":"outline",size:"sm",onClick:a=>Q(s.value)},{default:u(()=>[G(l(s.label),1)]),_:2},1032,["variant","onClick"])),64))]),$.value==="custom"?(r(),n("div",me,[d(j,{modelValue:S.value,"onUpdate:modelValue":t[0]||(t[0]=s=>S.value=s),type:"date",placeholder:"Start Date",class:"w-32"},null,8,["modelValue"]),d(j,{modelValue:D.value,"onUpdate:modelValue":t[1]||(t[1]=s=>D.value=s),type:"date",placeholder:"End Date",class:"w-32"},null,8,["modelValue"]),d(R,{onClick:X,size:"sm"},{default:u(()=>t[6]||(t[6]=[G(" Apply ")])),_:1})])):C("",!0)])])]),e("div",_e,[(r(!0),n(f,null,w(K.value,s=>(r(),E(x,{key:s.title,class:"p-4"},{default:u(()=>[e("div",ve,[e("div",null,[e("p",pe,l(s.title),1),e("p",fe,l(s.value),1),s.change?(r(),n("p",{key:0,class:N(["text-xs",s.changeType==="positive"?"text-green-600":"text-red-600"])},l(s.change)+" from last period ",3)):(r(),n("p",xe,l(s.description),1))]),e("div",he,l(s.icon),1)])]),_:2},1024))),128))]),e("div",be,[d(x,{class:"p-6"},{default:u(()=>[e("div",we,[t[8]||(t[8]=e("h3",{class:"text-lg font-semibold"},"Sampling Trends",-1)),e("div",ye,[e("div",ke,[d(j,{modelValue:h.value,"onUpdate:modelValue":t[2]||(t[2]=s=>h.value=s),type:"text",placeholder:g.value?`Cage ${g.value}`:"All Cages",class:"w-full sm:w-40",onFocus:t[3]||(t[3]=s=>V.value=!0),onInput:t[4]||(t[4]=s=>V.value=!0)},null,8,["modelValue","placeholder"]),V.value&&(h.value||z.value.length>0)?(r(),n("div",Ce,[e("button",{type:"button",class:N(["w-full text-left px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-700",{"bg-blue-50 dark:bg-blue-900/20":!g.value}]),onClick:t[5]||(t[5]=s=>{g.value=null,h.value="",V.value=!1,W()})},t[7]||(t[7]=[e("span",{class:"font-medium"},"All Cages",-1)]),2),(r(!0),n(f,null,w(z.value,s=>(r(),n("div",{key:s.id,class:N(["px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-700 cursor-pointer",{"bg-blue-50 dark:bg-blue-900/20":g.value===s.id.toString()}]),onClick:a=>{g.value=s.id.toString(),h.value=`Cage ${s.id}`,V.value=!1,W()}}," Cage "+l(s.id)+" - "+l(s.farmer_name)+" ("+l(s.number_of_fingerlings)+" fingerlings) ",11,$e))),128))])):C("",!0)])])]),d(ae,{trends:o.value.sampling_trends||[]},null,8,["trends"])]),_:1}),d(x,{class:"p-6"},{default:u(()=>{var s,a,v,p;return[t[13]||(t[13]=e("h3",{class:"text-lg font-semibold mb-4"},"Weight Statistics",-1)),e("div",Se,[e("div",De,[e("div",Ve,[e("p",We,l(b(((s=o.value.weight_stats)==null?void 0:s.avg_weight)||0)),1),t[9]||(t[9]=e("p",{class:"text-sm text-muted-foreground"},"Average Weight",-1))]),e("div",Me,[e("p",Te,l(b(((a=o.value.weight_stats)==null?void 0:a.max_weight)||0)),1),t[10]||(t[10]=e("p",{class:"text-sm text-muted-foreground"},"Max Weight",-1))])]),e("div",Ae,[e("div",Ne,[e("p",Fe,l(b(((v=o.value.weight_stats)==null?void 0:v.min_weight)||0)),1),t[11]||(t[11]=e("p",{class:"text-sm text-muted-foreground"},"Min Weight",-1))]),e("div",je,[e("p",Ie,l(Y(((p=o.value.weight_stats)==null?void 0:p.total_weight)||0))+"g",1),t[12]||(t[12]=e("p",{class:"text-sm text-muted-foreground"},"Total Weight",-1))])])])]}),_:1})]),e("div",Ue,[d(x,{class:"p-6"},{default:u(()=>{var s;return[t[14]||(t[14]=e("h3",{class:"text-lg font-semibold mb-4"},"My Cages Performance",-1)),e("div",ze,[(r(!0),n(f,null,w(o.value.cage_performance,a=>(r(),n("div",{key:a.id,class:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-lg"},[e("div",null,[e("p",Be,"Cage "+l(a.id),1),e("p",Le,l(a.farmer_name||"Unassigned")+" - "+l(a.number_of_fingerlings)+" fingerlings",1)]),e("div",Pe,[e("p",Ee,l(b(a.avg_sample_weight||0)),1),e("p",Ge,l(a.sampling_count)+" samplings",1)])]))),128)),(s=o.value.cage_performance)!=null&&s.length?C("",!0):(r(),n("div",Re," No data available "))])]}),_:1}),d(x,{class:"p-6"},{default:u(()=>{var s;return[t[16]||(t[16]=e("h3",{class:"text-lg font-semibold mb-4"},"Feed Type Usage",-1)),e("div",Oe,[(r(!0),n(f,null,w(o.value.feed_type_usage,a=>(r(),n("div",{key:a.feed_type,class:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-lg"},[e("div",null,[e("p",qe,l(a.feed_type),1),e("p",He,l(a.brand),1)]),e("div",Je,[e("p",Ke,l(a.cage_count),1),t[15]||(t[15]=e("p",{class:"text-sm text-muted-foreground"},"cages",-1))])]))),128)),(s=o.value.feed_type_usage)!=null&&s.length?C("",!0):(r(),n("div",Qe," No data available "))])]}),_:1})]),U.value.length>0?(r(),E(x,{key:0,class:"p-6"},{default:u(()=>[t[17]||(t[17]=e("h3",{class:"text-lg font-semibold mb-4"},"My Farmers",-1)),e("div",Xe,[(r(!0),n(f,null,w(U.value,s=>(r(),n("div",{key:s.id,class:"p-4 bg-gray-50 dark:bg-gray-800 rounded-lg"},[e("div",Ye,[e("div",Ze,l(s.name.charAt(0).toUpperCase()),1),e("div",null,[e("p",et,l(s.name),1),e("p",tt,l(s.email),1),e("p",st,l(s.cages_count)+" cage(s)",1)])])]))),128))])]),_:1})):C("",!0),d(x,{class:"p-6"},{default:u(()=>{var s;return[t[19]||(t[19]=e("h3",{class:"text-lg font-semibold mb-4"},"Recent Samplings",-1)),e("div",lt,[e("table",ot,[t[18]||(t[18]=e("thead",null,[e("tr",{class:"border-b"},[e("th",{class:"text-left py-2 px-3"},"Cage"),e("th",{class:"text-left py-2 px-3"},"Date"),e("th",{class:"text-left py-2 px-3"},"DOC"),e("th",{class:"text-left py-2 px-3"},"Samples"),e("th",{class:"text-left py-2 px-3"},"Avg Weight"),e("th",{class:"text-left py-2 px-3"},"Mortality")])],-1)),e("tbody",null,[(r(!0),n(f,null,w(o.value.recent_samplings,a=>(r(),n("tr",{key:a.id,class:"border-b hover:bg-gray-50 dark:hover:bg-gray-800"},[e("td",at,l(a.cage_no),1),e("td",rt,l(a.date_sampling),1),e("td",nt,l(a.doc),1),e("td",it,l(a.sample_count),1),e("td",dt,l(b(a.avg_weight)),1),e("td",ut,l(a.mortality),1)]))),128))])]),(s=o.value.recent_samplings)!=null&&s.length?C("",!0):(r(),n("div",gt," No samplings available "))])]}),_:1}),d(x,{class:"p-6"},{default:u(()=>{var s,a,v,p,M,T,A,B,L,P;return[t[24]||(t[24]=e("h3",{class:"text-lg font-semibold mb-4"},"Growth Metrics",-1)),e("div",ct,[e("div",mt,[t[20]||(t[20]=e("div",{class:"text-3xl mb-2"},"ðŸ“Š",-1)),e("p",{class:N(["text-2xl font-bold",((s=o.value.growth_metrics)==null?void 0:s.sampling_growth)>0?"text-green-600":"text-red-600"])},l(((a=o.value.growth_metrics)==null?void 0:a.sampling_growth)>0?"+":"")+l(((v=o.value.growth_metrics)==null?void 0:v.sampling_growth)||0)+"% ",3),t[21]||(t[21]=e("p",{class:"text-sm text-muted-foreground"},"Sampling Growth",-1)),e("p",_t,l(((p=o.value.growth_metrics)==null?void 0:p.current_samplings)||0)+" vs "+l(((M=o.value.growth_metrics)==null?void 0:M.previous_samplings)||0),1)]),e("div",vt,[t[22]||(t[22]=e("div",{class:"text-3xl mb-2"},"âš–ï¸",-1)),e("p",{class:N(["text-2xl font-bold",((T=o.value.growth_metrics)==null?void 0:T.weight_growth)>0?"text-green-600":"text-red-600"])},l(((A=o.value.growth_metrics)==null?void 0:A.weight_growth)>0?"+":"")+l(((B=o.value.growth_metrics)==null?void 0:B.weight_growth)||0)+"% ",3),t[23]||(t[23]=e("p",{class:"text-sm text-muted-foreground"},"Weight Growth",-1)),e("p",pt,l(b(((L=o.value.growth_metrics)==null?void 0:L.current_avg_weight)||0))+" vs "+l(b(((P=o.value.growth_metrics)==null?void 0:P.previous_avg_weight)||0)),1)])])]}),_:1})])]}),_:1})],64))}});export{$t as default};

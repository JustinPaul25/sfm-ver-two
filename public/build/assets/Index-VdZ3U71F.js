import{d as R,r as m,c as F,o as W,a as c,b as f,e as a,u as j,m as X,w as l,f as r,g as z,h as P,q as Y,i as n,F as V,j as A,t as g,s as Z,k as B}from"./app-CBk11mag.js";import{_ as ee}from"./AppLayout.vue_vue_type_script_setup_true_lang-D12r0hmV.js";import{u as te,S as x}from"./sweetalert2.esm.all-B1y4sHGz.js";import{_ as i}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-Dq1VqWqp.js";import{_ as y}from"./Input.vue_vue_type_script_setup_true_lang-BJ61T-m5.js";import{_ as h,a as $,b as D,c as U,d as S}from"./DialogTitle.vue_vue_type_script_setup_true_lang-S02Kz3jF.js";import{_ as N}from"./DialogTrigger.vue_vue_type_script_setup_true_lang-6aYthWHk.js";import"./useForwardExpose-DBlRa9Z3.js";import"./RovingFocusGroup-2FDYX2yh.js";const ae={class:"flex flex-col gap-4 p-4"},se={class:"flex items-center justify-between gap-2"},le={class:"flex gap-2 items-center"},re={class:"overflow-x-auto rounded-xl border border-sidebar-border/70 dark:border-sidebar-border bg-white dark:bg-gray-900"},ne={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},oe={class:"bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700"},de={key:0,class:"animate-pulse"},ue={key:1},ie={class:"px-6 py-4 whitespace-nowrap"},pe={class:"px-6 py-4 whitespace-nowrap"},fe={class:"px-6 py-4 whitespace-nowrap"},ve={class:"px-6 py-4 whitespace-nowrap text-right"},me={class:"flex gap-1"},ce={key:0,class:"flex items-center justify-between px-4 py-3 bg-white dark:bg-gray-900 border-t border-gray-200 dark:border-gray-700"},ge={class:"flex items-center text-sm text-gray-700 dark:text-gray-300"},ye={class:"flex items-center space-x-2"},xe={class:"flex items-center space-x-1"},Ue=R({__name:"Index",setup(be){const M=[{title:"Dashboard",href:"/dashboard"},{title:"Investors",href:"/investors"}],o=te(),C=m(""),b=m(!1),_=m(!1),k=m(null),w=m(!1),d=m(null),v=m({name:"",address:"",phone:""}),q=F(()=>{const s=o.investors;return(s==null?void 0:s.data)||[]}),u=F(()=>{const s=o.investors;return s!=null&&s.current_page?{current_page:s.current_page,last_page:s.last_page,per_page:s.per_page,total:s.total,from:s.from,to:s.to}:null});function E(){o.setFilters({search:C.value,page:1}),o.fetchInvestors()}function I(s){o.setFilters({...o.filters,page:s}),o.fetchInvestors()}function T(){if(!u.value)return[];const s=u.value.current_page,e=u.value.last_page,t=[];t.push(1);for(let p=Math.max(2,s-1);p<=Math.min(e-1,s+1);p++)p>1&&p<e&&t.push(p);return e>1&&t.push(e),[...new Set(t)].sort((p,Q)=>p-Q)}function K(){v.value={name:"",address:"",phone:""},b.value=!0}async function L(){try{await o.createInvestor(v.value),await o.fetchInvestors(),b.value=!1,x.fire({icon:"success",title:"Investor created successfully!"})}catch(s){x.fire({icon:"error",title:"Error",text:(s==null?void 0:s.message)||"Failed to create investor."})}}function H(s){k.value=s,_.value=!0}async function G(){if(k.value!==null)try{await o.deleteInvestor(k.value),await o.fetchInvestors(),_.value=!1,k.value=null,x.fire({icon:"success",title:"Investor deleted successfully!"})}catch(s){x.fire({icon:"error",title:"Error",text:(s==null?void 0:s.message)||"Failed to delete investor."})}}function J(s){d.value={...s},w.value=!0}async function O(){if(d.value&&d.value.id)try{await o.updateInvestor(d.value.id,{name:d.value.name,address:d.value.address,phone:d.value.phone}),await o.fetchInvestors(),w.value=!1,d.value=null,x.fire({icon:"success",title:"Investor updated successfully!"})}catch(s){x.fire({icon:"error",title:"Error",text:(s==null?void 0:s.message)||"Failed to update investor."})}}return W(()=>{o.fetchInvestors()}),(s,e)=>(f(),c(V,null,[a(j(X),{title:"Investors"}),a(ee,{breadcrumbs:M},{default:l(()=>[r("div",ae,[r("div",se,[r("div",le,[a(y,{modelValue:C.value,"onUpdate:modelValue":e[0]||(e[0]=t=>C.value=t),placeholder:"Search investors...",onKeyup:Y(E,["enter"]),class:"w-64"},null,8,["modelValue"]),a(i,{onClick:E,variant:"default"},{default:l(()=>e[15]||(e[15]=[n("Search")])),_:1})]),a(i,{onClick:K,variant:"secondary"},{default:l(()=>e[16]||(e[16]=[n("Create Investor")])),_:1})]),r("div",re,[r("table",ne,[e[21]||(e[21]=r("thead",{class:"bg-gray-50 dark:bg-gray-800"},[r("tr",null,[r("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Name"),r("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Address"),r("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Phone"),r("th",{class:"px-6 py-3"})])],-1)),r("tbody",oe,[j(o).loading?(f(),c("tr",de,e[17]||(e[17]=[r("td",{colspan:"4",class:"px-6 py-4 text-center text-gray-500"},"Loading...",-1)]))):q.value.length===0?(f(),c("tr",ue,e[18]||(e[18]=[r("td",{colspan:"4",class:"px-6 py-4 text-center text-gray-500"},"No investors found.",-1)]))):(f(!0),c(V,{key:2},A(q.value,t=>(f(),c("tr",{key:t.id},[r("td",ie,g(t.name),1),r("td",pe,g(t.address),1),r("td",fe,g(t.phone),1),r("td",ve,[r("div",me,[a(i,{variant:"secondary",size:"sm",onClick:p=>J(t),title:"Update",class:"w-8 h-8 p-0"},{default:l(()=>e[19]||(e[19]=[n(" âœï¸ ")])),_:2},1032,["onClick"]),a(i,{variant:"destructive",size:"sm",onClick:p=>H(t.id),title:"Delete",class:"w-8 h-8 p-0"},{default:l(()=>e[20]||(e[20]=[n(" ðŸ—‘ï¸ ")])),_:2},1032,["onClick"])])])]))),128))])])]),u.value?(f(),c("div",ce,[r("div",ge,[r("span",null,"Showing "+g(u.value.from)+" to "+g(u.value.to)+" of "+g(u.value.total)+" results",1)]),r("div",ye,[a(i,{variant:"outline",size:"sm",disabled:u.value.current_page===1,onClick:e[1]||(e[1]=t=>I(u.value.current_page-1))},{default:l(()=>e[22]||(e[22]=[n(" Previous ")])),_:1},8,["disabled"]),r("div",xe,[(f(!0),c(V,null,A(T(),t=>(f(),z(i,{key:t,variant:"outline",size:"sm",class:Z(t===u.value.current_page?"bg-primary text-primary-foreground":""),onClick:p=>I(t)},{default:l(()=>[n(g(t),1)]),_:2},1032,["class","onClick"]))),128))]),a(i,{variant:"outline",size:"sm",disabled:u.value.current_page===u.value.last_page,onClick:e[2]||(e[2]=t=>I(u.value.current_page+1))},{default:l(()=>e[23]||(e[23]=[n(" Next ")])),_:1},8,["disabled"])])])):P("",!0)]),a(h,{open:b.value,"onUpdate:open":e[7]||(e[7]=t=>b.value=t)},{default:l(()=>[a(N,{"as-child":""}),a($,null,{default:l(()=>[a(D,null,{default:l(()=>[a(U,null,{default:l(()=>e[24]||(e[24]=[n("Create Investor")])),_:1})]),_:1}),r("form",{onSubmit:B(L,["prevent"]),class:"flex flex-col gap-4 mt-2"},[a(y,{modelValue:v.value.name,"onUpdate:modelValue":e[3]||(e[3]=t=>v.value.name=t),placeholder:"Name",required:""},null,8,["modelValue"]),a(y,{modelValue:v.value.address,"onUpdate:modelValue":e[4]||(e[4]=t=>v.value.address=t),placeholder:"Address",required:""},null,8,["modelValue"]),a(y,{modelValue:v.value.phone,"onUpdate:modelValue":e[5]||(e[5]=t=>v.value.phone=t),placeholder:"Phone",required:""},null,8,["modelValue"]),a(S,{class:"flex justify-end gap-2 mt-4"},{default:l(()=>[a(i,{type:"button",variant:"secondary",onClick:e[6]||(e[6]=t=>b.value=!1)},{default:l(()=>e[25]||(e[25]=[n("Cancel")])),_:1}),a(i,{type:"submit",variant:"default"},{default:l(()=>e[26]||(e[26]=[n("Create")])),_:1})]),_:1})],32)]),_:1})]),_:1},8,["open"]),a(h,{open:_.value,"onUpdate:open":e[9]||(e[9]=t=>_.value=t)},{default:l(()=>[a(N,{"as-child":""}),a($,null,{default:l(()=>[a(D,null,{default:l(()=>[a(U,null,{default:l(()=>e[27]||(e[27]=[n("Delete Investor")])),_:1})]),_:1}),e[30]||(e[30]=r("div",{class:"mt-2"},"Are you sure you want to delete this investor?",-1)),a(S,{class:"flex justify-end gap-2 mt-4"},{default:l(()=>[a(i,{type:"button",variant:"secondary",onClick:e[8]||(e[8]=t=>_.value=!1)},{default:l(()=>e[28]||(e[28]=[n("Cancel")])),_:1}),a(i,{type:"button",variant:"destructive",onClick:G},{default:l(()=>e[29]||(e[29]=[n("Delete")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"]),d.value?(f(),z(h,{key:0,open:w.value,"onUpdate:open":e[14]||(e[14]=t=>w.value=t)},{default:l(()=>[a(N,{"as-child":""}),a($,null,{default:l(()=>[a(D,null,{default:l(()=>[a(U,null,{default:l(()=>e[31]||(e[31]=[n("Edit Investor")])),_:1})]),_:1}),r("form",{onSubmit:B(O,["prevent"]),class:"flex flex-col gap-4 mt-2"},[a(y,{modelValue:d.value.name,"onUpdate:modelValue":e[10]||(e[10]=t=>d.value.name=t),placeholder:"Name",required:""},null,8,["modelValue"]),a(y,{modelValue:d.value.address,"onUpdate:modelValue":e[11]||(e[11]=t=>d.value.address=t),placeholder:"Address",required:""},null,8,["modelValue"]),a(y,{modelValue:d.value.phone,"onUpdate:modelValue":e[12]||(e[12]=t=>d.value.phone=t),placeholder:"Phone",required:""},null,8,["modelValue"]),a(S,{class:"flex justify-end gap-2 mt-4"},{default:l(()=>[a(i,{type:"button",variant:"secondary",onClick:e[13]||(e[13]=t=>w.value=!1)},{default:l(()=>e[32]||(e[32]=[n("Cancel")])),_:1}),a(i,{type:"submit",variant:"default"},{default:l(()=>e[33]||(e[33]=[n("Update")])),_:1})]),_:1})],32)]),_:1})]),_:1},8,["open"])):P("",!0)]),_:1})],64))}});export{Ue as default};

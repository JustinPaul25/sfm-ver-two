import{E as K,r as x,c as z,o as R,a as y,b as i,e as l,u as b,m as L,w as r,f as s,h as k,C as G,i as f,t as o,F,j as E,A as N,g as T,k as H}from"./app-CzhniAMT.js";import{_ as J}from"./AppLayout.vue_vue_type_script_setup_true_lang-Cfv7ZBw5.js";import{u as O}from"./FeedTypeStore-D90Ln-eR.js";import{_ as c}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-1iHGJxcY.js";import{_ as C}from"./Input.vue_vue_type_script_setup_true_lang-DoOMrtD2.js";import{_ as Q,a as W,b as X,c as Y}from"./DialogTitle.vue_vue_type_script_setup_true_lang-BHnP_P35.js";import{_ as Z}from"./DialogTrigger.vue_vue_type_script_setup_true_lang-CODCzXzO.js";import{_ as ee}from"./DialogFooter.vue_vue_type_script_setup_true_lang-DjHRfOq4.js";import"./useForwardExpose-DEh402Yc.js";import"./RovingFocusGroup-Daz5GHfr.js";const te={class:"flex flex-col gap-4 p-4"},ae={class:"flex items-center justify-between gap-2"},se={class:"flex gap-2 items-center"},le={key:0,class:"text-red-500 mb-2"},re={class:"overflow-x-auto rounded-xl border border-sidebar-border/70 dark:border-sidebar-border bg-white dark:bg-gray-900"},de={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},ne={class:"bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700"},oe={key:0},ie={class:"px-6 py-4 whitespace-nowrap"},ue={class:"px-6 py-4 whitespace-nowrap"},pe={class:"px-6 py-4 whitespace-nowrap"},fe={class:"px-6 py-4 whitespace-nowrap"},ce={class:"px-6 py-4 whitespace-nowrap text-right"},ye={class:"flex gap-1"},ve={key:1,class:"flex items-center justify-between px-4 py-3 bg-white dark:bg-gray-900 border-t border-gray-200 dark:border-gray-700"},_e={class:"flex items-center text-sm text-gray-700 dark:text-gray-300"},me={class:"flex items-center space-x-2"},ge={class:"flex items-center space-x-1"},xe={key:0,class:"text-red-500 text-sm mt-1"},be={key:0,class:"text-red-500 text-sm mt-1"},Ee={__name:"Index",setup(ke){const A=[{title:"Dashboard",href:"/dashboard"},{title:"Feed Types",href:"/feed-types"}],u=O(),{feedTypes:$,loading:B,error:V}=K(u),w=x(""),S=z(()=>{const a=$.value;return(a==null?void 0:a.data)||[]}),n=z(()=>{const a=$.value;return a!=null&&a.current_page?{current_page:a.current_page,last_page:a.last_page,per_page:a.per_page,total:a.total,from:a.from,to:a.to}:null}),_=x(!1),g=x(!1),p=x({id:null,feed_type:"",brand:""}),v=x(null);R(()=>{u.fetchFeedTypes()});function D(){u.setFilters({search:w.value,page:1}),u.fetchFeedTypes()}function h(a){u.setFilters({...u.filters,page:a}),u.fetchFeedTypes()}function U(){if(!n.value)return[];const a=n.value.current_page,e=n.value.last_page,t=[];t.push(1);for(let d=Math.max(2,a-1);d<=Math.min(e-1,a+1);d++)d>1&&d<e&&t.push(d);return e>1&&t.push(e),[...new Set(t)].sort((d,m)=>d-m)}function j(){g.value=!1,p.value={id:null,feed_type:"",brand:""},_.value=!0,v.value=null}function M(a){g.value=!0,p.value={...a},_.value=!0,v.value=null}async function P(){var a,e;v.value=null;try{g.value?await u.updateFeedType(p.value.id,{feed_type:p.value.feed_type,brand:p.value.brand}):await u.createFeedType({feed_type:p.value.feed_type,brand:p.value.brand}),_.value=!1}catch(t){v.value=((e=(a=t==null?void 0:t.response)==null?void 0:a.data)==null?void 0:e.errors)||"An error occurred."}}async function q(a){confirm("Are you sure you want to delete this feed type?")&&await u.deleteFeedType(a)}async function I(a){await u.restoreFeedType(a)}return(a,e)=>(i(),y(F,null,[l(b(L),{title:"Feed Types"}),l(J,{breadcrumbs:A},{default:r(()=>[s("div",te,[s("div",ae,[s("div",se,[l(C,{modelValue:w.value,"onUpdate:modelValue":e[0]||(e[0]=t=>w.value=t),placeholder:"Search feed types...",onKeyup:G(D,["enter"]),class:"w-64"},null,8,["modelValue"]),l(c,{onClick:D,variant:"default"},{default:r(()=>e[7]||(e[7]=[f("Search")])),_:1})]),l(c,{onClick:j,variant:"secondary"},{default:r(()=>e[8]||(e[8]=[f("Add Feed Type")])),_:1})]),b(V)?(i(),y("div",le,o(b(V)),1)):k("",!0),s("div",re,[s("table",de,[e[13]||(e[13]=s("thead",{class:"bg-gray-50 dark:bg-gray-800"},[s("tr",null,[s("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"ID"),s("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Feed Type"),s("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Brand"),s("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Deleted At"),s("th",{class:"px-6 py-3"})])],-1)),s("tbody",ne,[S.value.length===0?(i(),y("tr",oe,e[9]||(e[9]=[s("td",{colspan:"5",class:"px-6 py-4 text-center text-gray-500"},"No feed types found.",-1)]))):(i(!0),y(F,{key:1},E(S.value,t=>(i(),y("tr",{key:t.id,class:N(t.deleted_at?"bg-red-50 dark:bg-red-950/50":"")},[s("td",ie,o(t.id),1),s("td",ue,o(t.feed_type),1),s("td",pe,o(t.brand),1),s("td",fe,o(t.deleted_at?t.deleted_at:"-"),1),s("td",ce,[s("div",ye,[l(c,{variant:"secondary",size:"sm",onClick:d=>M(t),disabled:!!t.deleted_at,title:"Edit",class:"w-8 h-8 p-0"},{default:r(()=>e[10]||(e[10]=[f(" âœï¸ ")])),_:2},1032,["onClick","disabled"]),t.deleted_at?(i(),T(c,{key:1,variant:"default",size:"sm",onClick:d=>I(t.id),title:"Restore",class:"w-8 h-8 p-0"},{default:r(()=>e[12]||(e[12]=[f(" ðŸ”„ ")])),_:2},1032,["onClick"])):(i(),T(c,{key:0,variant:"destructive",size:"sm",onClick:d=>q(t.id),title:"Delete",class:"w-8 h-8 p-0"},{default:r(()=>e[11]||(e[11]=[f(" ðŸ—‘ï¸ ")])),_:2},1032,["onClick"]))])])],2))),128))])])]),n.value?(i(),y("div",ve,[s("div",_e,[s("span",null,"Showing "+o(n.value.from)+" to "+o(n.value.to)+" of "+o(n.value.total)+" results",1)]),s("div",me,[l(c,{variant:"outline",size:"sm",disabled:n.value.current_page===1,onClick:e[1]||(e[1]=t=>h(n.value.current_page-1))},{default:r(()=>e[14]||(e[14]=[f(" Previous ")])),_:1},8,["disabled"]),s("div",ge,[(i(!0),y(F,null,E(U(),t=>(i(),T(c,{key:t,variant:"outline",size:"sm",class:N(t===n.value.current_page?"bg-primary text-primary-foreground":""),onClick:d=>h(t)},{default:r(()=>[f(o(t),1)]),_:2},1032,["class","onClick"]))),128))]),l(c,{variant:"outline",size:"sm",disabled:n.value.current_page===n.value.last_page,onClick:e[2]||(e[2]=t=>h(n.value.current_page+1))},{default:r(()=>e[15]||(e[15]=[f(" Next ")])),_:1},8,["disabled"])])])):k("",!0),l(Q,{open:_.value,"onUpdate:open":e[6]||(e[6]=t=>_.value=t)},{default:r(()=>[l(Z,{"as-child":""}),l(W,null,{default:r(()=>{var t,d;return[l(X,null,{default:r(()=>[l(Y,null,{default:r(()=>[f(o(g.value?"Edit":"Add")+" Feed Type",1)]),_:1})]),_:1}),s("form",{onSubmit:H(P,["prevent"]),class:"flex flex-col gap-4 mt-2"},[s("div",null,[l(C,{modelValue:p.value.feed_type,"onUpdate:modelValue":e[3]||(e[3]=m=>p.value.feed_type=m),placeholder:"Feed Type",required:""},null,8,["modelValue"]),(t=v.value)!=null&&t.feed_type?(i(),y("div",xe,o(v.value.feed_type[0]),1)):k("",!0)]),s("div",null,[l(C,{modelValue:p.value.brand,"onUpdate:modelValue":e[4]||(e[4]=m=>p.value.brand=m),placeholder:"Brand",required:""},null,8,["modelValue"]),(d=v.value)!=null&&d.brand?(i(),y("div",be,o(v.value.brand[0]),1)):k("",!0)]),l(ee,{class:"flex justify-end gap-2 mt-4"},{default:r(()=>[l(c,{type:"button",variant:"secondary",onClick:e[5]||(e[5]=m=>_.value=!1)},{default:r(()=>e[16]||(e[16]=[f("Cancel")])),_:1}),l(c,{type:"submit",variant:"default",disabled:b(B)},{default:r(()=>[f(o(g.value?"Update":"Create"),1)]),_:1},8,["disabled"])]),_:1})],32)]}),_:1})]),_:1},8,["open"])])]),_:1})],64))}};export{Ee as default};
